<?xml version="1.0" encoding="UTF-8"?>

<!-- Spring beans having to do with OSGi -->

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:osgi="http://www.springframework.org/schema/osgi"
	xmlns:osgix="http://www.springframework.org/schema/osgi-compendium"
	xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
       http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi.xsd
       http://www.springframework.org/schema/osgi-compendium http://www.springframework.org/schema/osgi-compendium/spring-osgi-compendium.xsd">

	<!-- OSGi service reference to the context service defined in the "main" bundle (Bundle A) -->
	<osgi:reference id="org.ojbc.bundles.prototypes.Bundle_A_Test-context" interface="org.ojbc.util.osgi.OjbcContext" bean-name="org.ojbc.bundles.prototypes.Bundle_A_Test-context"/>

	<!-- Properties list built from four components, in order of precedence:
	
		1. Properties defined in the derived bundle
		2. Properties defined in the "compendium" config file (i.e., file placed in Karaf/etc)
		3. Properties defined in the camel context (spring)
		4. Properties defined in classpath properties file
	
	-->
	<util:list id="propertiesList">
		<ref bean="classpathProperties"/>
		<ref bean="contextProperties"/>
		<osgix:cm-properties id="osgiProperties" persistent-id="Bundle_A_Test"/>
		<ref bean="derivedBundleOsgiProperties"/>
	</util:list>
	
</beans>